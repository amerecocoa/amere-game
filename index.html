<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>AMERE Chocolate Empire</title>
<style>
body{font-family:Segoe UI;background:#120906;color:#f5e9dc;margin:0}
.container{max-width:1200px;margin:20px auto;background:#2a160f;padding:20px;border-radius:16px}
h1,h2,h3{margin:5px 0}
input,select,button{padding:8px;border-radius:8px;border:none;margin-top:6px}
button{background:#7a3e22;color:white;cursor:pointer}
button:hover{background:#9c4f2a}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:10px}
.card{background:#3a2016;padding:10px;border-radius:10px;text-align:center;cursor:pointer;border:2px solid transparent}
.card.selected{border:2px solid gold;box-shadow:0 0 10px gold}
.stat{background:#3a2016;padding:10px;border-radius:10px;margin-top:10px}
.log{background:#1d0f0a;padding:10px;border-radius:10px;margin-top:10px;max-height:200px;overflow-y:auto;font-size:13px}
.eventBox{background:#4a2417;padding:10px;border-radius:10px;margin-top:10px}
.summary{background:#3a2016;padding:15px;border-radius:12px;margin-top:10px}
.flex{display:flex;gap:20px}
.sidebar{width:250px}
.main{flex:1}
.big{font-size:40px}
.gameover{color:#ff6b6b;font-size:20px;text-align:center;margin-top:10px}
</style>
</head>
<body>

<div class="container">

<div id="setup">
<h1>Buat Karakter</h1>
<input type="text" id="playerName" placeholder="Nama Kamu">
<select id="gender">
<option value="ğŸ‘¨">Pria</option>
<option value="ğŸ‘©">Wanita</option>
</select>

<h3>Pilih 3 Trait</h3>
<div class="grid" id="traitGrid"></div>
<button onclick="startGame()">Mulai Game</button>
</div>

<div id="game" style="display:none">

<div class="flex">

<div class="sidebar">
<h2 id="playerInfo"></h2>
<div class="stat">
ğŸ“… Hari: <span id="day"></span><br>
ğŸ¬ Tier: <span id="tier"></span><br>
ğŸ’° Uang: Rp <span id="money"></span><br>
â­ Reputasi: <span id="rep"></span>/100
</div>

<div class="stat">
ğŸ‘¨â€ğŸ³ Produksi: <span id="prod"></span><br>
ğŸ§¹ Cleaner: <span id="clean"></span><br>
ğŸ›¡ Security: <span id="sec"></span>
</div>

<button onclick="hire('prod')">+ Produksi</button>
<button onclick="hire('clean')">+ Cleaner</button>
<button onclick="hire('sec')">+ Security</button>

<button onclick="fire('prod')">- Produksi</button>
<button onclick="fire('clean')">- Cleaner</button>
<button onclick="fire('sec')">- Security</button>

<button onclick="restart()">Restart</button>
</div>

<div class="main">

<h2>Fase Siang</h2>

<select id="product" onchange="changeProduct()"></select>
<button onclick="sell()">ğŸ›’ Jual</button>
<button onclick="produce()">ğŸ­ Produksi</button>
<button onclick="closeDay()">ğŸŒ™ Tutup Toko</button>

<div id="eventArea"></div>
<div class="log" id="log"></div>

<div id="summaryArea"></div>

<div class="gameover" id="gameover"></div>

</div>

</div>
</div>
</div>

<script>

const traits={
visioner:"ğŸ‘‘ Harga +10%",
hemat:"ğŸ’° Produksi -20%",
keamanan:"ğŸ›¡ Maling -50%",
marketing:"ğŸ“£ Kadang 2x jual",
lucky:"ğŸ€ Event jarang",
premium:"âœ¨ Reputasi naik cepat"
};

let selected=[];
let state=JSON.parse(localStorage.getItem("amereFinal"));

const grid=document.getElementById("traitGrid");
for(let k in traits){
let c=document.createElement("div");
c.className="card";
c.innerHTML=k+"<br>"+traits[k];
c.onclick=()=>{
if(selected.includes(k)){
selected=selected.filter(x=>x!==k);
c.classList.remove("selected");
}else{
if(selected.length>=3){alert("Pilih 3 trait!");return;}
selected.push(k);
c.classList.add("selected");
}
};
grid.appendChild(c);
}

function startGame(){
let name=document.getElementById("playerName").value;
let gender=document.getElementById("gender").value;
if(!name||selected.length!==3){alert("Lengkapi setup!");return;}

state={
name,gender,
day:1,
tier:1,
money:150000,
rep:50,
target:60000,
incomeToday:0,
expenseToday:0,
workers:{prod:1,clean:0,sec:0},
traits:selected,
current:"dark",
investor:null,
products:{
dark:{name:"Dark",stock:5,price:12000},
milk:{name:"Milk",stock:6,price:10000},
truffle:{name:"Truffle",stock:3,price:18000}
}
};

localStorage.setItem("amereFinal",JSON.stringify(state));
location.reload();
}

if(state){
document.getElementById("setup").style.display="none";
document.getElementById("game").style.display="block";
document.getElementById("playerInfo").innerHTML=
state.gender+" "+state.name+"<br><small>Owner AMERE</small>";
const sel=document.getElementById("product");
for(let k in state.products){
let o=document.createElement("option");
o.value=k;o.text=state.products[k].name;
sel.appendChild(o);
}
}

function save(){localStorage.setItem("amereFinal",JSON.stringify(state));}
function has(t){return state.traits.includes(t);}

function update(){
document.getElementById("day").innerText=state.day;
document.getElementById("tier").innerText=state.tier;
document.getElementById("money").innerText=state.money.toLocaleString();
document.getElementById("rep").innerText=Math.floor(state.rep);
document.getElementById("prod").innerText=state.workers.prod;
document.getElementById("clean").innerText=state.workers.clean;
document.getElementById("sec").innerText=state.workers.sec;
if(state.money<=0){
document.getElementById("gameover").innerText="ğŸ’€ BANGKRUT";
}
save();
}

function log(t){
let d=document.createElement("div");
d.innerText=t;
document.getElementById("log").prepend(d);
}

function changeProduct(){state.current=document.getElementById("product").value;}

function sell(){
let p=state.products[state.current];
if(p.stock<=0){log("âŒ Stok habis");return;}

let chance=0.6+(state.rep/200)+(state.workers.clean*0.02);
if(Math.random()>chance){
state.rep-=3;
log("âš ï¸ Gagal jual");
return;
}

p.stock--;
let income=p.price+(state.rep*10);
if(has("visioner"))income*=1.1;
if(has("marketing")&&Math.random()<0.2)income*=2;

income=Math.floor(income);
state.money+=income;
state.incomeToday+=income;
state.rep+= has("premium")?3:2;

log("ğŸ›’ Terjual +"+income.toLocaleString());
}

function produce(){
let cost=30000;
if(has("hemat"))cost*=0.8;
if(state.money<cost){log("âŒ Uang kurang");return;}
state.money-=cost;
state.expenseToday+=cost;
let add=5+(state.workers.prod*2);
state.products[state.current].stock+=add;
log("ğŸ­ Produksi +"+add);
}

function hire(t){state.workers[t]++;}
function fire(t){if(state.workers[t]>0)state.workers[t]--;}

function closeDay(){

let salary=(state.workers.prod*8000)+(state.workers.clean*5000)+(state.workers.sec*7000);
state.money-=salary;
state.expenseToday+=salary;

let theft=0;
if(Math.random()<0.2){
theft=Math.floor(Math.random()*50000)+20000;
theft-=state.workers.sec*6000;
if(has("keamanan"))theft*=0.5;
if(theft<0)theft=0;
state.money-=theft;
state.expenseToday+=theft;
}

if(state.incomeToday>=state.target){
state.rep+=5;
}else{
state.rep-=3;
}

if(state.day==14){state.rep+=10;log("â¤ï¸ Valentine Boost!");}
if(state.day==30){state.rep+=15;log("ğŸ‰ Festival Coklat!");}

let summary=`
ğŸ“… Hari ${state.day} Selesai<br>
ğŸ’° Income: +${state.incomeToday.toLocaleString()}<br>
ğŸ’¸ Expense: -${state.expenseToday.toLocaleString()}<br>
ğŸ¦¹ Maling: -${theft.toLocaleString()}<br>
â­ Reputasi: ${Math.floor(state.rep)}<br>
`;
document.getElementById("summaryArea").innerHTML=
"<div class='summary'>"+summary+"<br><button onclick='nextDay()'>Next Day â¡</button></div>";
}

function nextDay(){
state.day++;
state.incomeToday=0;
state.expenseToday=0;

if(state.rep>=70 && state.tier==1){state.tier=2;}
if(state.rep>=85 && state.tier==2){state.tier=3;}

if(Math.random()<0.15){
showCollab();
}

if(Math.random()<0.1 && !state.investor){
state.investor={debt:300000,days:5};
state.money+=200000;
log("ğŸ’¼ Investor masuk! Harus bayar 300k dalam 5 hari.");
}

if(state.investor){
state.investor.days--;
if(state.investor.days<=0){
if(state.money>=state.investor.debt){
state.money-=state.investor.debt;
log("ğŸ’¼ Investor lunas.");
}else{
state.rep-=30;
log("ğŸ’¥ Gagal bayar investor!");
}
state.investor=null;
}
}

document.getElementById("summaryArea").innerHTML="";
update();
}

function showCollab(){
let cost=50000;
let gain=20;
let box=document.createElement("div");
box.className="eventBox";
box.innerHTML=`ğŸ¤ Collab Brand!<br>
Biaya: 50.000<br>
Reputasi +20<br>
<button onclick="acceptCollab()">Terima</button>
<button onclick="declineCollab()">Tolak</button>`;
document.getElementById("eventArea").innerHTML="";
document.getElementById("eventArea").appendChild(box);
}

function acceptCollab(){
if(state.money<50000){log("âŒ Uang kurang collab");return;}
state.money-=50000;
state.rep+=20;
log("ğŸŒŸ Collab sukses!");
document.getElementById("eventArea").innerHTML="";
}

function declineCollab(){
state.rep-=5;
log("âŒ Tolak collab");
document.getElementById("eventArea").innerHTML="";
}

function restart(){
localStorage.removeItem("amereFinal");
location.reload();
}

update();
</script>

</body>
</html>
