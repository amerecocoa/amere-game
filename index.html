<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>AMÃˆRE: Bitter Origins</title>
<style>
body{
  background:#0e0a0a;
  color:#f4e4d0;
  font-family:Georgia,serif;
  margin:0;
  padding:20px;
}
#game{max-width:900px;margin:auto;}
button{
  background:#3a1f1f;
  color:#fff;
  border:none;
  padding:8px 14px;
  margin:4px;
  cursor:pointer;
}
button:hover{background:#6a2e2e;}
.panel{
  border:1px solid #5c3a3a;
  padding:15px;
  margin-top:10px;
}
.log{
  height:120px;
  overflow-y:auto;
  background:#1a1212;
  padding:10px;
  font-size:13px;
}
h1{color:#d8b27c;}
.map button{display:block;width:200px;text-align:left;}
</style>
</head>
<body>
<div id="game">

<h1>ğŸ« AMÃˆRE: Bitter Origins</h1>

<div id="story" class="panel"></div>
<div id="stats" class="panel"></div>
<div id="actions" class="panel"></div>
<div id="log" class="panel log"></div>

</div>

<script>

let day=1;
let gold=120;
let reputation=50;
let morale=60;
let actionsLeft=5;
let skillPoints=0;

let inventory={
  cacao:0,
  sugar:0,
  fire:0
};

let stock={
  basic:0,
  spicy:0
};

let skills={
  quality:0,
  negotiation:0,
  survival:0
};

function log(msg){
  document.getElementById("log").innerHTML+="<div>"+msg+"</div>";
  let box=document.getElementById("log");
  box.scrollTop=box.scrollHeight;
}

function updateStats(){
  document.getElementById("stats").innerHTML=`
  ğŸ“… Day ${day} | ğŸ¯ Actions Left: ${actionsLeft}<br>
  ğŸ’° Gold: ${gold} | â­ Reputation: ${reputation} | ğŸ§  Morale: ${morale}<br>
  ğŸ« Cacao:${inventory.cacao} ğŸ¬ Sugar:${inventory.sugar} ğŸ”¥ Fire:${inventory.fire}<br>
  ğŸ“¦ Stock â†’ Basic:${stock.basic} | Spicy:${stock.spicy}<br>
  ğŸŒŸ Skill Points:${skillPoints}
  `;
}

function intro(){
  document.getElementById("story").innerHTML=`
  <p>Kota Valdore mulai melupakan AMÃˆRE.  
  Kompetitor semakin kuat.  
  Kamu punya 15 hari untuk membuktikan diri.</p>
  <button onclick="mainMenu()">Mulai</button>
  `;
}

function useAction(){
  actionsLeft--;
  if(actionsLeft<=0){
    endDay();
  }
}

function mainMenu(){
  updateStats();
  document.getElementById("actions").innerHTML=`
  <button onclick="showMap()">ğŸ—º Eksplorasi</button>
  <button onclick="craft()">ğŸ« Craft</button>
  <button onclick="serveCustomer()">ğŸ‘¤ Layani Pelanggan</button>
  <button onclick="showSkill()">ğŸŒ³ Skill Tree</button>
  `;
}

function showMap(){
  document.getElementById("actions").innerHTML=`
  <div class="map">
  <b>Pilih Lokasi:</b><br>
  <button onclick="explore('forest')">ğŸŒ² Hutan Aurovine</button>
  <button onclick="explore('mountain')">ğŸ”¥ Gunung Emberfall</button>
  <button onclick="mainMenu()">â¬… Kembali</button>
  </div>
  `;
}

function explore(place){
  if(place=="forest"){
    inventory.cacao++;
    inventory.sugar++;
    log("Menemukan kakao & gula liar.");
  }
  if(place=="mountain"){
    inventory.fire++;
    morale-=5;
    log("Mendapat Fire Essence tapi melelahkan.");
  }
  if(Math.random()>0.8){
    morale-=10;
    log("âš”ï¸ Diserang makhluk liar! Morale turun.");
  }
  useAction();
  updateStats();
  mainMenu();
}

function craft(){
  if(inventory.cacao>=1 && inventory.sugar>=1){
    inventory.cacao--;
    inventory.sugar--;
    stock.basic++;
    reputation+=3+skills.quality;
    log("Membuat Basic Truffle.");
  }
  if(inventory.cacao>=1 && inventory.fire>=1){
    inventory.cacao--;
    inventory.fire--;
    stock.spicy++;
    reputation+=5+skills.quality;
    log("Membuat Spicy Ember.");
  }
  useAction();
  updateStats();
  mainMenu();
}

function serveCustomer(){
  let type=Math.random();
  document.getElementById("actions").innerHTML="";

  if(type<0.5){
    document.getElementById("actions").innerHTML=`
    <p>Pelanggan sedih datang. Mau?</p>
    <button onclick="sellBasic()">Jual Basic</button>
    <button onclick="encourage()">Beri motivasi (tanpa jual)</button>
    `;
  }else{
    document.getElementById("actions").innerHTML=`
    <p>Pelanggan kaya ingin coklat pedas eksklusif.</p>
    <button onclick="sellSpicy()">Jual Spicy</button>
    <button onclick="raisePrice()">Naikkan harga</button>
    `;
  }
}

function sellBasic(){
  if(stock.basic>0){
    stock.basic--;
    gold+=25+skills.negotiation;
    morale+=5;
    log("Basic terjual.");
  }else{
    log("Stock kosong.");
  }
  useAction();
  mainMenu();
}

function encourage(){
  morale+=10;
  reputation+=5;
  log("Kamu membantu tanpa jual. Reputasi naik.");
  useAction();
  mainMenu();
}

function sellSpicy(){
  if(stock.spicy>0){
    stock.spicy--;
    gold+=40+skills.negotiation;
    reputation+=5;
    log("Spicy terjual mahal.");
  }else{
    log("Stock kosong.");
  }
  useAction();
  mainMenu();
}

function raisePrice(){
  if(stock.spicy>0){
    stock.spicy--;
    if(Math.random()>0.5){
      gold+=70;
      reputation-=5;
      log("Untung besar tapi reputasi turun.");
    }else{
      reputation-=15;
      log("Pelanggan marah.");
    }
  }
  useAction();
  mainMenu();
}

function showSkill(){
  document.getElementById("actions").innerHTML=`
  <p>Skill Tree:</p>
  Quality (${skills.quality}) 
  <button onclick="upgrade('quality')">Upgrade</button><br>
  Negotiation (${skills.negotiation}) 
  <button onclick="upgrade('negotiation')">Upgrade</button><br>
  Survival (${skills.survival}) 
  <button onclick="upgrade('survival')">Upgrade</button><br>
  <button onclick="mainMenu()">â¬…</button>
  `;
}

function upgrade(type){
  if(skillPoints>0){
    skills[type]++;
    skillPoints--;
  }
  mainMenu();
}

function endDay(){
  day++;
  actionsLeft=5;
  morale-=5;

  if(day%3==0){
    skillPoints++;
    log("Naik level! Dapat 1 Skill Point.");
  }

  if(day>=15){
    ending();
    return;
  }

  checkGameOver();
  updateStats();
  mainMenu();
}

function checkGameOver(){
  if(gold<=0) endGame("Bangkrut.");
  if(reputation<=0) endGame("Reputasi hancur.");
  if(morale<=0) endGame("Kamu menyerah.");
}

function ending(){
  if(reputation>120) endGame("ğŸ‘‘ Legendaris Chocolatier.");
  else if(gold>400) endGame("ğŸ’° Konglomerat coklat.");
  else endGame("AMÃˆRE bertahan... tapi belum bersinar.");
}

function endGame(msg){
  document.getElementById("actions").innerHTML="";
  document.getElementById("story").innerHTML="<h2>GAME OVER</h2><p>"+msg+"</p><button onclick='location.reload()'>Main Lagi</button>";
}

intro();

</script>
</body>
</html>
