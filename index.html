<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>AMERE Chocolate Empire</title>
<style>
body{
  font-family:Segoe UI;
  background:#120906;
  color:#f5e9dc;
}
.container{
  max-width:1100px;
  margin:30px auto;
  background:#2a160f;
  padding:25px;
  border-radius:16px;
}
h1{text-align:center;margin-bottom:10px}
input,select,button{
  padding:10px;
  border-radius:8px;
  border:none;
  margin-top:8px;
}
button{
  background:#7a3e22;
  color:white;
  cursor:pointer;
}
button:hover{background:#9c4f2a}

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
  gap:12px;
  margin-top:15px;
}

.card{
  background:#3a2016;
  padding:15px;
  border-radius:12px;
  text-align:center;
  cursor:pointer;
  border:2px solid transparent;
  transition:.2s;
}
.card:hover{transform:scale(1.05)}
.card.selected{
  border:2px solid gold;
  box-shadow:0 0 15px gold;
}

.avatar{
  font-size:40px;
  margin-bottom:5px;
}

.stat{
  background:#3a2016;
  padding:12px;
  border-radius:12px;
  margin-top:15px;
}

.log{
  background:#1d0f0a;
  padding:10px;
  border-radius:10px;
  margin-top:10px;
  max-height:200px;
  overflow-y:auto;
  font-size:13px;
}

.eventBox{
  background:#4a2417;
  padding:10px;
  border-radius:10px;
  margin-top:10px;
}

.gameover{
  color:#ff6b6b;
  text-align:center;
  margin-top:15px;
  font-size:20px;
}

.headerPlayer{
  display:flex;
  align-items:center;
  gap:15px;
  margin-bottom:10px;
}

.playerIcon{
  font-size:50px;
}
</style>
</head>
<body>

<div class="container">

<!-- SETUP -->
<div id="setup">

<h1>Buat Karakter</h1>

<input type="text" id="playerName" placeholder="Nama Kamu">

<select id="gender">
<option value="üë®">Pria</option>
<option value="üë©">Wanita</option>
</select>

<h3>Pilih 3 Karakter</h3>

<div class="grid" id="charGrid"></div>

<button onclick="startGame()">Mulai Game</button>

</div>

<!-- GAME -->
<div id="game" style="display:none">

<div class="headerPlayer">
<div class="playerIcon" id="playerIcon"></div>
<div>
<h2 id="welcome"></h2>
</div>
</div>

<div class="stat">
üí∞ Uang: Rp <span id="money"></span><br>
‚≠ê Reputasi: <span id="rep"></span>/100<br>
üë®‚Äçüç≥ Produksi: <span id="prod"></span><br>
üßπ Cleaner: <span id="clean"></span><br>
üõ° Security: <span id="sec"></span>
</div>

<select id="product" onchange="changeProduct()"></select>

<button onclick="sell()">Jual</button>
<button onclick="produce()">Produksi</button>

<button onclick="hire('prod')">+ Produksi</button>
<button onclick="hire('clean')">+ Cleaner</button>
<button onclick="hire('sec')">+ Security</button>

<button onclick="fire('prod')">- Produksi</button>
<button onclick="fire('clean')">- Cleaner</button>
<button onclick="fire('sec')">- Security</button>

<div id="eventArea"></div>

<button onclick="restart()">Restart</button>

<div class="log" id="log"></div>
<div class="gameover" id="gameover"></div>

</div>

</div>

<script>

const traits={
visioner:{emoji:"üëë",desc:"+10% Harga"},
hemat:{emoji:"üí∞",desc:"Produksi -20%"},
keamanan:{emoji:"üõ°",desc:"Maling -50%"},
marketing:{emoji:"üì£",desc:"Kadang 2x"},
negosiator:{emoji:"ü§ù",desc:"Upgrade murah"},
lucky:{emoji:"üçÄ",desc:"Event jarang"},
premium:{emoji:"‚ú®",desc:"Reputasi cepat naik"},
perfeksionis:{emoji:"üéØ",desc:"Produk gagal jarang"},
supplier:{emoji:"üì¶",desc:"Bahan jelek jarang"},
efisien:{emoji:"‚öô",desc:"+2 stok"}
};

let selected=[];
let state=JSON.parse(localStorage.getItem("amereUltimate"));

const grid=document.getElementById("charGrid");

for(let key in traits){
let c=document.createElement("div");
c.className="card";
c.innerHTML=`<div class="avatar">${traits[key].emoji}</div>
<b>${key}</b><br><small>${traits[key].desc}</small>`;
c.onclick=()=>{
if(selected.includes(key)){
selected=selected.filter(x=>x!==key);
c.classList.remove("selected");
}else{
if(selected.length>=3){alert("Maksimal 3 karakter!");return;}
selected.push(key);
c.classList.add("selected");
}
};
grid.appendChild(c);
}

function startGame(){
let name=document.getElementById("playerName").value;
let gender=document.getElementById("gender").value;
if(!name||selected.length!==3){alert("Isi nama & pilih 3!");return;}

state={
name,gender,
money:120000,
rep:50,
workers:{prod:1,clean:0,sec:0},
traits:selected,
current:"dark",
products:{
dark:{name:"Dark",stock:5,price:12000},
milk:{name:"Milk",stock:6,price:10000},
truffle:{name:"Truffle",stock:3,price:18000}
},
gameOver:false
};

localStorage.setItem("amereUltimate",JSON.stringify(state));
location.reload();
}

if(state){
document.getElementById("setup").style.display="none";
document.getElementById("game").style.display="block";
document.getElementById("welcome").innerText=
state.name+" ‚Äî Owner AMERE";
document.getElementById("playerIcon").innerText=state.gender;

const select=document.getElementById("product");
for(let k in state.products){
let o=document.createElement("option");
o.value=k;o.text=state.products[k].name;
select.appendChild(o);
}
}

function save(){localStorage.setItem("amereUltimate",JSON.stringify(state));}
function has(t){return state.traits.includes(t);}

function update(){
document.getElementById("money").innerText=state.money.toLocaleString();
document.getElementById("rep").innerText=Math.floor(state.rep);
document.getElementById("prod").innerText=state.workers.prod;
document.getElementById("clean").innerText=state.workers.clean;
document.getElementById("sec").innerText=state.workers.sec;

if(state.money<=0&&!state.gameOver){
state.gameOver=true;
document.getElementById("gameover").innerText="üíÄ BANGKRUT";
}
save();
}

function log(t){
let d=document.createElement("div");
d.innerText=t;
document.getElementById("log").prepend(d);
}

function changeProduct(){
state.current=document.getElementById("product").value;
update();
}

function paySalary(){
let total=(state.workers.prod*8000)+(state.workers.clean*5000)+(state.workers.sec*7000);
state.money-=total;
log("üíµ Gaji (-"+total.toLocaleString()+")");
}

function sell(){
if(state.gameOver)return;
let p=state.products[state.current];
if(p.stock<=0){log("‚ùå Stok habis");return;}

let chance=0.6+(state.rep/200)+(state.workers.clean*0.02);
if(Math.random()>chance){
state.rep-=5;
log("‚ö†Ô∏è Gagal jual");
update();return;
}

p.stock--;
let income=p.price+(state.rep*15);
if(has("visioner"))income*=1.1;
if(has("marketing")&&Math.random()<0.2)income*=2;

state.money+=Math.floor(income);
state.rep+= has("premium")?4:2;

log("‚úÖ Terjual (+"+Math.floor(income).toLocaleString()+")");

paySalary();
randomEvent();
update();
}

function produce(){
let cost=25000;
if(has("hemat"))cost*=0.8;
if(state.money<cost){log("‚ùå Uang kurang");return;}

state.money-=cost;
let add=4+(state.workers.prod*2);
if(has("efisien"))add+=2;
state.products[state.current].stock+=add;

log("üè≠ Produksi +" + add);
paySalary();
randomEvent();
update();
}

function hire(type){state.workers[type]++;update();}
function fire(type){if(state.workers[type]>0)state.workers[type]--;update();}

function randomEvent(){
if(Math.random()<0.2){
let loss=Math.floor(Math.random()*50000)+20000;
loss-=state.workers.sec*6000;
if(loss<0)loss=0;
state.money-=loss;
state.rep-=10;
log("ü¶π Maling (-"+loss.toLocaleString()+")");
}

if(Math.random()<0.15){
showCollab();
}
}

function showCollab(){
let cost=Math.floor(Math.random()*50000)+30000;
let gain=Math.floor(Math.random()*30)+20;

let box=document.createElement("div");
box.className="eventBox";
box.innerHTML=`
üé§ Idol/Brand ingin collab!<br>
Biaya: Rp ${cost.toLocaleString()}<br>
Reputasi +${gain}<br><br>
<button onclick="accept(${cost},${gain})">Terima</button>
<button onclick="decline()">Tolak</button>
`;
document.getElementById("eventArea").innerHTML="";
document.getElementById("eventArea").appendChild(box);
}

function accept(cost,gain){
if(state.money<cost){log("‚ùå Uang kurang collab");return;}
state.money-=cost;
state.rep+=gain;
log("üåü Collab sukses!");
document.getElementById("eventArea").innerHTML="";
update();
}

function decline(){
state.rep-=5;
log("‚ùå Tolak collab");
document.getElementById("eventArea").innerHTML="";
update();
}

function restart(){
localStorage.removeItem("amereUltimate");
location.reload();
}

update();
</script>

</body>
</html>
