<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>AMERE Chocolate Empire</title>
<style>
body{font-family:Segoe UI;background:#140a06;color:#f5e9dc}
.container{max-width:950px;margin:25px auto;background:#2a160f;padding:20px;border-radius:14px}
h1{text-align:center}
button,select,input{width:100%;padding:8px;margin-top:6px;border-radius:6px;border:none}
button{background:#7a3e22;color:white;cursor:pointer}
button:hover{background:#9c4f2a}
.stat{background:#3a2016;padding:10px;border-radius:8px;margin-top:10px}
.log{background:#1d0f0a;padding:10px;border-radius:8px;margin-top:10px;max-height:200px;overflow-y:auto;font-size:13px}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:10px}
.card{background:#3a2016;padding:10px;border-radius:8px;text-align:center;cursor:pointer;border:2px solid transparent}
.card.selected{border:2px solid gold}
.eventBox{background:#4a2417;padding:10px;border-radius:8px;margin-top:10px}
.gameover{color:#ff6b6b;text-align:center;margin-top:10px}
</style>
</head>
<body>

<div class="container">

<h1>AMERE Chocolate Empire</h1>

<div class="stat">
üí∞ Uang: Rp <span id="money"></span><br>
‚≠ê Reputasi: <span id="rep"></span>/100<br>
üë• Pekerja Produksi: <span id="prodWorker"></span><br>
üßπ Cleaner: <span id="cleaner"></span><br>
üõ° Security: <span id="security"></span>
</div>

<select id="product" onchange="changeProduct()"></select>

<button onclick="sell()">Jual</button>
<button onclick="produce()">Produksi</button>

<button onclick="hireProd()">Tambah Produksi</button>
<button onclick="hireCleaner()">Tambah Cleaner</button>
<button onclick="hireSecurity()">Tambah Security</button>

<button onclick="fireProd()">Kurangi Produksi</button>
<button onclick="fireCleaner()">Kurangi Cleaner</button>
<button onclick="fireSecurity()">Kurangi Security</button>

<div id="eventArea"></div>

<button onclick="restart()">Restart</button>

<div class="log" id="log"></div>
<div class="gameover" id="gameover"></div>

</div>

<script>

let state = JSON.parse(localStorage.getItem("amereFull")) || {
money:100000,
rep:50,
current:"dark",
gameOver:false,
workers:{prod:1,cleaner:0,security:0},
products:{
dark:{name:"Dark",stock:5,price:12000},
milk:{name:"Milk",stock:6,price:10000},
truffle:{name:"Truffle",stock:3,price:18000}
}
};

const select=document.getElementById("product");
for(let k in state.products){
let o=document.createElement("option");
o.value=k;o.text=state.products[k].name;
select.appendChild(o);
}

function save(){localStorage.setItem("amereFull",JSON.stringify(state));}

function update(){
document.getElementById("money").innerText=state.money.toLocaleString();
document.getElementById("rep").innerText=Math.floor(state.rep);
document.getElementById("prodWorker").innerText=state.workers.prod;
document.getElementById("cleaner").innerText=state.workers.cleaner;
document.getElementById("security").innerText=state.workers.security;

if(state.money<=0&&!state.gameOver){
state.gameOver=true;
document.getElementById("gameover").innerText="üíÄ BANGKRUT";
}
save();
}

function log(t){
let d=document.createElement("div");
d.innerText=t;
document.getElementById("log").prepend(d);
}

function changeProduct(){state.current=select.value;update();}

function paySalary(){
let salary=(state.workers.prod*8000)+(state.workers.cleaner*5000)+(state.workers.security*7000);
state.money-=salary;
log("üíµ Gaji dibayar (-"+salary.toLocaleString()+")");
}

function sell(){
if(state.gameOver)return;
let p=state.products[state.current];
if(p.stock<=0){log("‚ùå Stok habis");return;}

let successChance=0.6+(state.rep/200)+(state.workers.cleaner*0.02);
if(Math.random()>successChance){
state.rep-=5;
log("‚ö†Ô∏è Gagal jual");
update();return;
}

p.stock--;
let income=p.price+(state.rep*20);
state.money+=Math.floor(income);
state.rep+=2;
log("‚úÖ Terjual (+"+Math.floor(income).toLocaleString()+")");

paySalary();
randomEvent();
update();
}

function produce(){
if(state.gameOver)return;
let cost=25000;
if(state.money<cost){log("‚ùå Uang kurang");return;}

state.money-=cost;
let add=4+(state.workers.prod*2);
state.products[state.current].stock+=add;
log("üè≠ Produksi +" + add);

paySalary();
randomEvent();
update();
}

function hireProd(){state.workers.prod++;update();}
function hireCleaner(){state.workers.cleaner++;update();}
function hireSecurity(){state.workers.security++;update();}

function fireProd(){if(state.workers.prod>0)state.workers.prod--;update();}
function fireCleaner(){if(state.workers.cleaner>0)state.workers.cleaner--;update();}
function fireSecurity(){if(state.workers.security>0)state.workers.security--;update();}

function randomEvent(){
let r=Math.random();

if(r<0.2){
let loss=Math.floor(Math.random()*50000)+20000;
loss-=state.workers.security*5000;
if(loss<0)loss=0;
state.money-=loss;
state.rep-=10;
log("ü¶π Maling (-"+loss.toLocaleString()+")");
}

if(Math.random()<0.15){
showCollabEvent();
}
}

function showCollabEvent(){
let cost=Math.floor(Math.random()*50000)+30000;
let gain=Math.floor(Math.random()*30)+20;

let box=document.createElement("div");
box.className="eventBox";
box.innerHTML=`
üé§ Idol ingin collab!<br>
Biaya: Rp ${cost.toLocaleString()}<br>
Potensi reputasi +${gain}<br><br>
<button onclick="acceptCollab(${cost},${gain})">Terima</button>
<button onclick="declineCollab()">Tolak</button>
`;
document.getElementById("eventArea").innerHTML="";
document.getElementById("eventArea").appendChild(box);
}

function acceptCollab(cost,gain){
if(state.money<cost){log("‚ùå Uang tidak cukup collab");return;}
state.money-=cost;
state.rep+=gain;
log("üåü Collab sukses! Reputasi naik");
document.getElementById("eventArea").innerHTML="";
update();
}

function declineCollab(){
state.rep-=5;
log("‚ùå Tolak collab (Reputasi turun)");
document.getElementById("eventArea").innerHTML="";
update();
}

function restart(){
localStorage.removeItem("amereFull");
location.reload();
}

update();
</script>

</body>
</html>
